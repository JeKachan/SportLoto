@model SportLoto.Models.IndexTicketViewModel

@{
    var action = ViewContext.RouteData.Values["action"].ToString();
    if (action.ToLower() == "index")
    {
        ViewBag.Title = "Active tickets";
    }
    else if (action.ToLower() == "purchasedtickets")
    {
        ViewBag.Title = "Purchased Tickets";
    }
}

<div class="container main">
    <div class="row ">
        <h2>@ViewBag.Title</h2>
       
        @if (Model.Tickets.Count > 0)
        {
            <div class="tickets clearfix">
                @for (var i = 0; i < Model.Tickets.Count; i++)
                {
                    var ticket = Model.Tickets[i];
                    <div class="ticket">
                        <div class="ricket-description">
                            Ticket #@(i + 1), <br>
                            Created: @ticket.CreateDate.ToString("dd.MM.yyyy HH:mm")
                        </div>
                        @foreach (var section in Model.GetTicketNo(ticket))
                        {
                            <div class="section">
                                @foreach (var cell in section)
                        {
                                    <span>@cell </span>
                                }
                            </div>
                        }
                    </div>
                }
                <div class="clearfix"></div>
            </div>
            <a href="@Url.Action("PayTicket", "Ticket")" class="btn btn-success">Pay tickets</a>
            <a href="@Url.Action("CreateTicket", "Ticket")" class="btn btn-default">Create new ticket</a>

        }
        else
        {
            <a href="@Url.Action("CreateTicket", "Ticket")" class="btn btn-default">Create new ticket</a>
            <div class="h3">No tickets here.</div>
        }
    </div>
</div>
